from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.textinput import TextInput
from kivy.uix.button import Button
from kivy.uix.image import Image
from kivy.graphics import Rectangle

class HitungPersegiApp(App):
    def build(self):

        root = BoxLayout(orientation="vertical", padding=10, spacing=10)

        # ==== Background canvas ====
        with root.canvas.before:
            self.bg = Rectangle(
                source="bgpersegi.jpeg",   # ganti nama file sesuai
                pos=root.pos,
                size=root.size
            )

        # update posisi & size saat window berubah
        root.bind(size=self.update_bg, pos=self.update_bg)

        # -------- KONTEN ---------

        judul = Label(
            text="Mengitung Luas Persegi",
            font_size=32,
            bold=True,
            color=(1,1,1,1),   # text putih biar keliatan
            size_hint=(1, None),
            height=60
        )
        root.add_widget(judul)

        gambar = Image(
            source="cobagambarpersegi.png",
            size_hint=(None, None),
            size=(350,200),
            pos_hint={"center_x":0.5}
        )
        root.add_widget(gambar)

        rumus = Label(
            text="Rumus: L = s Ã— s",
            font_size=20,
            color=(1,1,1,1)
        )
        root.add_widget(rumus)

        self.sisi = TextInput(
            hint_text="Masukkan sisi",
            size_hint=(None, None),
            size=(200,50),
            pos_hint={"center_x":0.5}
        )
        root.add_widget(self.sisi)

        tombol = Button(
            text="Hitung Luas",
            size_hint=(None,None),
            size=(150,50),
            pos_hint={"center_x":0.5}
        )
        tombol.bind(on_press=self.hitung)
        root.add_widget(tombol)

        self.label = Label(
            text="Hasil muncul di sini",
            font_size=18,
            color=(1,1,1,1)
        )
        root.add_widget(self.label)

        return root

    def update_bg(self, instance, value):
        self.bg.pos = instance.pos
        self.bg.size = instance.size

    def hitung(self, instance):
        try:
            s=float(self.sisi.text)
            hasil=s*s
            self.label.text=f"Luas persegi: {hasil}"
        except:
            self.label.text="Isi angka dulu!"

if __name__ == '__main__':
    HitungPersegiApp().run()	
